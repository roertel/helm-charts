{{- $apiversion := "v1" }}
{{- $kind := "Secret" }}
{{- if .Capabilities.APIVersions.Has (printf "%s/%s" $apiversion $kind) }}
{{- $defaults := dict "name" .Release.Name }}
{{- with get .Values (lower $kind) }}
{{- $localvalues := $defaults | merge . }}
apiVersion: {{ $apiversion }}
kind: {{ $kind }}
metadata: {{ include "mariadb-manifests.metadata" $localvalues | nindent 2 }}
spec: {{ include "mariadb-manifests.spec" $localvalues | nindent 2 }}
{{- end }}
{{- end }}
